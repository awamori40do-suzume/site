<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>質問フロー</title>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
</head>
<body>

    <div id="question-container">
        <div id="initial-question">
            <p>初めの質問: はい or いいえ?</p>
            <button id="yesButton">Yes</button>
            <button id="noButton">No</button>
        </div>
        <div id="questions" style="display:none;">
            <div id="question1" style="display:none;">
                <p>質問1: 質問1の内容</p>
                <button class="nextButton">次へ</button>
                <div id="restart" style="display:none;">
                    <button class="restartButton">最初から質問する</button>
                </div>
            </div>
            <div id="question2" style="display:none;">
                <p>質問2: 質問2の内容</p>
                <button class="nextButton">次へ</button>
                <div id="restart" style="display:none;">
                    <button class="restartButton">最初から質問する</button>
                </div>
            </div>
            <div id="question3" style="display:none;">
                <p>質問3: 質問3の内容</p>
                <div id="restart" style="display:none;">
                    <button class="restartButton">最初から質問する</button>
                </div>
            </div>
        </div>
        <div id="call-to-action" style="display:none;">
            <p>訴求画面: 訴求内容を表示</p>
        </div>
    </div>

    <script>
        $(document).ready(function() {
            let currentQuestion = 1;

            $('#yesButton').click(function() {
                $('#initial-question').fadeOut(function() {
                    $('#questions').fadeIn();
                    showQuestion(currentQuestion);
                    $('#question' + currentQuestion + ' .restartButton').fadeIn(); // 現在の質問に最初から戻るボタンを表示
                });
            });

            $('#noButton').click(function() {
                $('#initial-question').fadeOut(function() {
                    $('#call-to-action').fadeIn();
                    $('#question' + currentQuestion + ' .restartButton').fadeIn(); // 最初から戻るボタンを表示
                });
            });

            $(document).on('click', '.restartButton', function() {
                currentQuestion = 1;
                $('#questions, #call-to-action').fadeOut(function() {
                    $('.question').hide();  // 全ての質問を非表示
                    $('#initial-question').fadeIn();
                    $('.restartButton').fadeOut(); // 最初から質問するボタンを非表示
                });
            });

            $(document).on('click', '.nextButton', function() {
                $('#question' + currentQuestion).fadeOut(function() {
                    currentQuestion++;
                    if (currentQuestion <= 3) {
                        showQuestion(currentQuestion);
                        $('#question' + currentQuestion + ' .restartButton').fadeIn(); // 次の質問に最初から戻るボタンを表示
                    }
                });
            });

            function showQuestion(questionNumber) {
                $('#question' + questionNumber).fadeIn();
            }
        });
    </script>

</body>
</html>
