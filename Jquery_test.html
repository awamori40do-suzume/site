<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>質問フロー</title>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <style>
        .restart {
            display: none; /* 初期状態では非表示 */
        }
        .transitionToCTA {
            display: none; /* 初期状態では非表示 */
        }
    </style>
</head>
<body>

    <div id="question-container">
        <div id="initial-question">
            <p>初めの質問: はい or いいえ?</p>
            <img id="yesButton" src="yes-button.png" alt="Yes" style="cursor:pointer;">
            <img id="noButton" src="no-button.png" alt="No" style="cursor:pointer;">
        </div>
        
        <div id="questions" style="display:none;">
            <div id="question1" class="question" style="display:none;">
                <p>質問1: 質問1の内容</p>
                <img class="nextButton" src="next-button.png" alt="次へ" style="cursor:pointer;">
                <img class="transitionToCTA" src="cta-button.png" alt="訴求画面へ" style="cursor:pointer;">
                <div class="restart">
                    <img class="restartButton" src="restart-button.png" alt="最初から質問する" style="cursor:pointer;">
                </div>
            </div>
            <div id="question2" class="question" style="display:none;">
                <p>質問2: 質問2の内容</p>
                <img class="nextButton" src="next-button.png" alt="次へ" style="cursor:pointer;">
                <img class="transitionToCTA" src="cta-button.png" alt="訴求画面へ" style="cursor:pointer;">
                <div class="restart">
                    <img class="restartButton" src="restart-button.png" alt="最初から質問する" style="cursor:pointer;">
                </div>
            </div>
            <div id="question3" class="question" style="display:none;">
                <p>質問3: 質問3の内容</p>
                <img class="transitionToCTA" src="cta-button.png" alt="訴求画面へ" style="cursor:pointer;">
                <div class="restart">
                    <img class="restartButton" src="restart-button.png" alt="最初から質問する" style="cursor:pointer;">
                </div>
            </div>
        </div>

        <div id="call-to-action" style="display:none;">
            <p>訴求画面: 訴求内容を表示</p>
            <div class="restart">
                <img class="restartButton" src="restart-button.png" alt="最初から質問する" style="cursor:pointer;">
            </div>
        </div>
    </div>

    <script>
        $(document).ready(function() {
            let currentQuestion = 1;

            $('#yesButton').click(function() {
                $('#initial-question').fadeOut(function() {
                    $('#questions').fadeIn();
                    showQuestion(currentQuestion);
                    $('.restart').fadeIn(); // 質問セクションでの「最初から質問する」ボタンを表示
                    $('.transitionToCTA').fadeIn(); // 各質問に訴求画面へのボタンを表示
                });
            });

            $('#noButton').click(function() {
                $('#initial-question').fadeOut(function() {
                    $('#call-to-action').fadeIn();
                    $('.restart').fadeIn(); // 訴求画面での「最初から質問する」ボタンを表示
                });
            });

            $(document).on('click', '.restartButton', function() {
                $('#questions, #call-to-action').fadeOut(function() {
                    $('.question').hide();  // 全ての質問を非表示
                    $('#initial-question').fadeIn(function() {
                        $('.restart').fadeIn(); // 初期質問セクションの「最初から質問する」ボタンも表示
                    });
                });
                currentQuestion = 1; // 質問のカウントリセット
            });

            $(document).on('click', '.nextButton', function() {
                $('#question' + currentQuestion).fadeOut(function() {
                    currentQuestion++;
                    if (currentQuestion <= 3) {
                        showQuestion(currentQuestion);
                    }
                });
            });

            $(document).on('click', '.transitionToCTA', function() {
                $('#questions').fadeOut(function() {
                    $('#call-to-action').fadeIn();
                    $('.restart').fadeIn(); // 訴求画面での「最初から質問する」ボタンを表示
                });
            });

            function showQuestion(questionNumber) {
                $('#question' + questionNumber).fadeIn();
            }
        });
    </script>

</body>
</html>
